<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" />
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <title>Kubernetes Logging</title>
    <meta name="robots" content="index,follow" />
    <meta name="googlebot" content="index,follow" />
    <meta name="description" content="Personal knowledge space" />
    <meta property="og:title" content="Kubernetes Logging" />
    <meta property="og:description" content="Personal knowledge space" />
    <meta
      property="og:url"
      content="https://wiki.gustavozavaleta.com/notes/bb0aabc9-d22e-4f1d-905d-96853fd3f8f7/"
    />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="5/22/2021" />
    <meta property="article:modified_time" content="5/22/2021" />
    <link
      rel="canonical"
      href="https://wiki.gustavozavaleta.com/notes/bb0aabc9-d22e-4f1d-905d-96853fd3f8f7/"
    />
    <meta name="next-head-count" content="14" />
    <link
      rel="preload"
      href="_next/static/css/f3f0453dbc0db68c.css"
      as="style"
    />
    <link
      rel="stylesheet"
      href="_next/static/css/f3f0453dbc0db68c.css"
      data-n-g=""
    />
    <noscript data-n-css=""></noscript>
    <script
      defer=""
      nomodule=""
      src="_next/static/chunks/polyfills-5cd94c89d3acac5f.js"
    ></script>
    <script
      src="_next/static/chunks/webpack-378e68e29c265886.js"
      defer=""
    ></script>
    <script
      src="_next/static/chunks/framework-dc33c0b5493501f0.js"
      defer=""
    ></script>
    <script
      src="_next/static/chunks/main-d4b16f161e1a380a.js"
      defer=""
    ></script>
    <script
      src="_next/static/chunks/pages/_app-516d9fdd8080f7c5.js"
      defer=""
    ></script>
    <script src="_next/static/chunks/155-ae889b1b91c43319.js" defer=""></script>
    <script
      src="_next/static/chunks/pages/notes/%5Bid%5D-ebe33fbe56ae1215.js"
      defer=""
    ></script>
    <script
      src="_next/static/L9maZkX7GA1Lh6KYhgL2P/_buildManifest.js"
      defer=""
    ></script>
    <script
      src="_next/static/L9maZkX7GA1Lh6KYhgL2P/_ssgManifest.js"
      defer=""
    ></script>
    <script
      src="_next/static/L9maZkX7GA1Lh6KYhgL2P/_middlewareManifest.js"
      defer=""
    ></script>
  </head>
  <body>
    <div id="__next" data-reactroot="">
      <section class="ant-layout" style="width: 100%; min-height: 100%">
        <header
          class="ant-layout-header"
          style="
            position: fixed;
            isolation: isolate;
            z-index: 1;
            width: 100%;
            border-bottom: 1px solid #d4dadf;
            height: 64px;
            padding: 0 24px 0 2px;
          "
        >
          <div
            class="ant-row ant-row-center"
            style="
              max-width: 992px;
              justify-content: space-between;
              margin: 0 auto;
            "
          >
            <div class="ant-col"></div>
            <div
              class="
                ant-col
                gutter-row
                ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19
              "
            ></div>
            <div
              style="
                margin-left: 4px;
                display: none;
                align-items: center;
                justify-content: center;
              "
              class="
                ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0
              "
            >
              <span
                role="img"
                aria-label="menu"
                style="font-size: 24px"
                tabindex="-1"
                class="anticon anticon-menu"
                ><svg
                  viewBox="64 64 896 896"
                  focusable="false"
                  data-icon="menu"
                  width="1em"
                  height="1em"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"
                  ></path></svg
              ></span>
            </div>
          </div>
        </header>
        <section class="ant-layout site-layout" style="margin-top: 64px">
          <section class="ant-layout site-layout" style="flex-direction: row">
            <section
              class="ant-layout site-layout-sidebar"
              style="
                flex: 0 0 auto;
                width: calc((100% - 992px) / 2 + 200px);
                min-width: 200px;
                padding-left: calc((100% - 992px) / 2);
              "
            >
              <aside
                class="ant-layout-sider ant-layout-sider-dark"
                style="
                  position: fixed;
                  overflow: auto;
                  height: calc(100vh - 64px);
                  flex: 0 0 200px;
                  max-width: 200px;
                  min-width: 200px;
                  width: 200px;
                "
              >
                <div class="ant-layout-sider-children"></div>
              </aside>
            </section>
            <section
              class="ant-layout side-layout-main"
              style="max-width: 960px; display: initial"
            >
              <main
                class="ant-layout-content main-content"
                role="main"
                style="padding: 0 24px"
              >
                <div class="ant-row">
                  <div class="ant-col ant-col-24">
                    <div
                      class="ant-row"
                      style="margin-left: -10px; margin-right: -10px"
                    >
                      <div
                        style="padding-left: 10px; padding-right: 10px"
                        class="ant-col ant-col-xs-24 ant-col-md-20"
                      >
                        <div>
                          <h1 id="kubernetes-logging">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#kubernetes-logging"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >Kubernetes Logging
                          </h1>
                          <h1 id="spike-kubernetes-logging">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#spike-kubernetes-logging"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >[SPIKE] Kubernetes Logging
                          </h1>
                          <p>
                            Spike about logging from Kubernetes to other
                            services. Check wich tools, tendencies,
                            compatibility.
                          </p>
                          <h2 id="podcast">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#podcast"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >Podcast
                          </h2>
                          <p>
                            <a
                              href="https://open.spotify.com/episode/3DvlI6SBdTn7yAd4UoNc4K?si=puy9i7eUTjiFTBIyqFbk_A"
                              >Fluent Bit: Lightweight Logging for Cloud Native
                              Applications - Eduardo Silva</a
                            >
                          </p>
                          <p>
                            <a
                              href="https://open.spotify.com/episode/6pKuVLowNYLshWA4DjXIw9?si=DUmeWZZ9RwizoIFlvHmszw"
                              >Logging with Loki</a
                            >
                          </p>
                          <p>
                            <a
                              href="https://open.spotify.com/episode/66pNYv1filMAlVTdRg2qHe?si=EHQvzEJ1QYa0GM6vektMEA"
                              >Building Datadog with Alexis Le Quoc</a
                            >
                          </p>
                          <ul>
                            <li>
                              <a
                                href="https://softwareengineeringdaily.com/wp-content/uploads/2018/04/SED575-Building-Datadog.pdf"
                                >Transcript</a
                              >
                            </li>
                          </ul>
                          <p>
                            <a
                              href="https://open.spotify.com/episode/7rVsxtJ3GKS1MQWZQeXc07?si=9w5w5HgVRHqvhe9yhRIzlg"
                              >Monitoring Kubernetes With LLan Rabinobitch</a
                            >
                          </p>
                          <h2 id="blogs">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#blogs"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >Blogs
                          </h2>
                          <p>
                            <a
                              href="https://medium.com/hashmapinc/application-logging-simplified-in-kubernetes-part-1-5ba603a1744b"
                              >Application Logging Simplified in Kubernetes
                            </a>
                          </p>
                          <p>
                            <a
                              href="https://www.datadoghq.com/blog/fluentbit-integration-announcement/"
                              >Fluent bit with data dog
                            </a>
                          </p>
                          <p>
                            <a
                              href="https://echorand.me/posts/fluentbit-kubernetes/"
                              >Fluent bit kubernets
                            </a>
                          </p>
                          <h2 id="data-collector">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#data-collector"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >Data Collector
                          </h2>
                          <p>
                            Is important for getting information and redirected
                            to a service like datadog, elasticsearch etc.
                          </p>
                          <p>Some options:</p>
                          <ul>
                            <li>
                              Fluentd pod:
                              <a href="https://hub.docker.com/r/fluent/fluentd/"
                                >https://hub.docker.com/r/fluent/fluentd/</a
                              >
                            </li>
                            <li>
                              Fluent Bit:
                              <a href="https://fluentbit.io/"
                                >https://fluentbit.io/</a
                              >
                            </li>
                            <li>
                              Loki:
                              <a href="https://github.com/grafana/loki"
                                >https://github.com/grafana/loki</a
                              >
                            </li>
                          </ul>
                          <p>
                            I tried Fluent bit and it's working great,
                            collecting information from every pod as deamon set.
                            A DeamonSet let's you get information inside every
                            pod, without affecting performance too much.
                          </p>
                          <h3 id="fluent-bit">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#fluent-bit"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >Fluent Bit
                          </h3>
                          <p>
                            Tutorial for kubernetes:
                            <a
                              href="https://docs.fluentbit.io/manual/installation/kubernetes"
                              >https://docs.fluentbit.io/manual/installation/kubernetes</a
                            >
                          </p>
                          <pre
                            class="language-bash"
                          ><code class="language-bash">$ kubectl create namespace logging
$ kubectl create -f https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/fluent-bit-service-account.yaml
$ kubectl create -f https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/fluent-bit-role.yaml
$ kubectl create -f https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/fluent-bit-role-binding.yaml
</code></pre>
                          <p>
                            important to consider <code>Match</code> wich is
                            related with the tags that you defined as
                            <code>Input</code>
                          </p>
                          <pre
                            class="language-yaml"
                          ><code class="language-yaml">$ config_map.yaml

<span class="token key atrule">output-datadog.conf</span><span class="token punctuation">:</span> <span class="token punctuation">|</span>
<span class="token punctuation">[</span>OUTPUT<span class="token punctuation">]</span>
  Name        datadog
  Match       backend
  apikey      $<span class="token punctuation">{</span>FLUENT_DATADOG_API_KEY<span class="token punctuation">}</span>
  dd_service  backend
  dd_tags     container<span class="token punctuation">:</span>backend<span class="token punctuation">,</span> env<span class="token punctuation">:</span>staging
  dd_source         fluent<span class="token punctuation">-</span>bit
  dd_message_key    log_processed
</code></pre>
                          <p>DeamonSet generic</p>
                          <pre><code>$ kubectl create -f https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/output/elasticsearch/fluent-bit-configmap.yaml
</code></pre>
                          <h2 id="logging">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#logging"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >Logging
                          </h2>
                          <p>
                            Prometheus vs Datadog:
                            <a
                              href="https://www.bluematador.com/blog/how-to-monitor-your-kubernetes-cluster-prometheus-vs-datadog"
                              >https://www.bluematador.com/blog/how-to-monitor-your-kubernetes-cluster-prometheus-vs-datadog</a
                            >
                          </p>
                          <p>Datadog</p>
                          <h2 id="roadblocks">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#roadblocks"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >Roadblocks
                          </h2>
                          <ul>
                            <li>Input and ouputs references didn't match</li>
                          </ul>
                          <h2 id="ideas">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#ideas"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >Ideas
                          </h2>
                          <p>Elasticseach like hammer for a spike</p>
                          <p>
                            Loki focus on logs and it's like prometheus.
                            compared with elasticsearch that focus on any kind
                            of data that you store.
                          </p>
                          <h2 id="references">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#references"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >References
                          </h2>
                          <ul>
                            <li>
                              <a
                                href="https://www.youtube.com/watch?v=B2IS-XS-cc0"
                                >https://www.youtube.com/watch?v=B2IS-XS-cc0</a
                              >
                              [Fluent Bit explained | Fluent Bit vs
                              Fluentd][TechWorld with Nana]
                            </li>
                            <li>
                              <a
                                href="https://docs.fluentbit.io/manual/pipeline/outputs/datadog"
                                >https://docs.fluentbit.io/manual/pipeline/outputs/datadog</a
                              >
                            </li>
                            <li>
                              <a
                                href="https://www.datadoghq.com/blog/fluentbit-integration-announcement/"
                                >https://www.datadoghq.com/blog/fluentbit-integration-announcement/</a
                              >
                            </li>
                            <li>
                              <a
                                href="https://docs.datadoghq.com/integrations/fluentbit/"
                                >https://docs.datadoghq.com/integrations/fluentbit/</a
                              >
                            </li>
                            <li>
                              <a
                                href="https://dev.to/amitsaha/how-to-set-up-log-forwarding-in-a-kubernetes-cluster-using-fluent-bit-3bgk"
                                >https://dev.to/amitsaha/how-to-set-up-log-forwarding-in-a-kubernetes-cluster-using-fluent-bit-3bgk</a
                              >
                            </li>
                            <li>
                              <a
                                href="https://github.com/DataDog/trace-examples/blob/98626d924f82666de60d6b2d6a65d87eebebdff1/opentelemetry/k8s-collector.yml#L181"
                                >https://github.com/DataDog/trace-examples/blob/98626d924f82666de60d6b2d6a65d87eebebdff1/opentelemetry/k8s-collector.yml#L181</a
                              >
                            </li>
                          </ul>
                          <hr />
                          <h2 id="backlinks">
                            <a
                              aria-hidden="true"
                              class="anchor-heading"
                              href="#backlinks"
                              ><svg aria-hidden="true" viewBox="0 0 16 16">
                                <use xlink:href="#svg-link"></use></svg></a
                            >Backlinks
                          </h2>
                          <ul>
                            <li>
                              <a
                                href="/notes/3c4e65d2-d0ca-4450-8073-dc1a39bddc29"
                                >Datadog (operating-systems)</a
                              >
                            </li>
                          </ul>
                        </div>
                      </div>
                      <div
                        style="padding-left: 10px; padding-right: 10px"
                        class="ant-col ant-col-xs-0 ant-col-md-4"
                      >
                        <div>
                          <div class="">
                            <div
                              class="ant-anchor-wrapper"
                              style="max-height: calc(100vh - 64px); z-index: 1"
                            >
                              <div class="ant-anchor">
                                <div class="ant-anchor-ink">
                                  <span class="ant-anchor-ink-ball"></span>
                                </div>
                                <div class="ant-anchor-link">
                                  <a
                                    class="ant-anchor-link-title"
                                    href="#spike-kubernetes-logging"
                                    title="SPIKE Kubernetes Logging"
                                    >SPIKE Kubernetes Logging</a
                                  >
                                </div>
                                <div class="ant-anchor-link">
                                  <a
                                    class="ant-anchor-link-title"
                                    href="#podcast"
                                    title="Podcast"
                                    >Podcast</a
                                  >
                                </div>
                                <div class="ant-anchor-link">
                                  <a
                                    class="ant-anchor-link-title"
                                    href="#blogs"
                                    title="Blogs"
                                    >Blogs</a
                                  >
                                </div>
                                <div class="ant-anchor-link">
                                  <a
                                    class="ant-anchor-link-title"
                                    href="#data-collector"
                                    title="Data Collector"
                                    >Data Collector</a
                                  >
                                </div>
                                <div class="ant-anchor-link">
                                  <a
                                    class="ant-anchor-link-title"
                                    href="#fluent-bit"
                                    title="Fluent Bit"
                                    >Fluent Bit</a
                                  >
                                </div>
                                <div class="ant-anchor-link">
                                  <a
                                    class="ant-anchor-link-title"
                                    href="#logging"
                                    title="Logging"
                                    >Logging</a
                                  >
                                </div>
                                <div class="ant-anchor-link">
                                  <a
                                    class="ant-anchor-link-title"
                                    href="#roadblocks"
                                    title="Roadblocks"
                                    >Roadblocks</a
                                  >
                                </div>
                                <div class="ant-anchor-link">
                                  <a
                                    class="ant-anchor-link-title"
                                    href="#ideas"
                                    title="Ideas"
                                    >Ideas</a
                                  >
                                </div>
                                <div class="ant-anchor-link">
                                  <a
                                    class="ant-anchor-link-title"
                                    href="#references"
                                    title="References"
                                    >References</a
                                  >
                                </div>
                                <div class="ant-anchor-link">
                                  <a
                                    class="ant-anchor-link-title"
                                    href="#backlinks"
                                    title="Backlinks"
                                    >Backlinks</a
                                  >
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </main>
              <div
                class="ant-divider ant-divider-horizontal"
                role="separator"
              ></div>
              <footer
                class="ant-layout-footer"
                style="padding: 0 24px 24px"
              ></footer>
            </section>
          </section>
        </section>
      </section>
    </div>
    <script id="__NEXT_DATA__" type="application/json">
      {
        "props": {
          "pageProps": {
            "note": {
              "id": "bb0aabc9-d22e-4f1d-905d-96853fd3f8f7",
              "title": "Kubernetes Logging",
              "vault": {
                "fsPath": "operating-systems",
                "name": "operating-systems"
              },
              "type": "note",
              "desc": "",
              "links": [
                {
                  "from": {
                    "fname": "operating-systems.monitoring.datadog",
                    "vaultName": "operating-systems"
                  },
                  "type": "backlink",
                  "position": {
                    "start": { "line": 2, "column": 240, "offset": 240 },
                    "end": { "line": 2, "column": 304, "offset": 304 },
                    "indent": []
                  },
                  "value": "operating-systems.kubernetes.logging"
                }
              ],
              "anchors": {
                "spike-kubernetes-logging": {
                  "type": "header",
                  "text": "SPIKE Kubernetes Logging",
                  "value": "spike-kubernetes-logging",
                  "line": 8,
                  "column": 0
                },
                "podcast": {
                  "type": "header",
                  "text": "Podcast",
                  "value": "podcast",
                  "line": 12,
                  "column": 0
                },
                "blogs": {
                  "type": "header",
                  "text": "Blogs",
                  "value": "blogs",
                  "line": 24,
                  "column": 0
                },
                "data-collector": {
                  "type": "header",
                  "text": "Data Collector",
                  "value": "data-collector",
                  "line": 32,
                  "column": 0
                },
                "fluent-bit": {
                  "type": "header",
                  "text": "Fluent Bit",
                  "value": "fluent-bit",
                  "line": 44,
                  "column": 0
                },
                "logging": {
                  "type": "header",
                  "text": "Logging",
                  "value": "logging",
                  "line": 79,
                  "column": 0
                },
                "roadblocks": {
                  "type": "header",
                  "text": "Roadblocks",
                  "value": "roadblocks",
                  "line": 85,
                  "column": 0
                },
                "ideas": {
                  "type": "header",
                  "text": "Ideas",
                  "value": "ideas",
                  "line": 89,
                  "column": 0
                },
                "references": {
                  "type": "header",
                  "text": "References",
                  "value": "references",
                  "line": 97,
                  "column": 0
                }
              },
              "fname": "operating-systems.kubernetes.logging",
              "updated": 1621702961234,
              "created": 1621702944254,
              "parent": "a104c545-bf72-4e5e-a3b1-ec7db40358bf",
              "children": [],
              "data": {},
              "contentHash": "1be70c3cef1c391fa657cdcb66a0041e",
              "custom": {}
            },
            "body": "\u003ch1 id=\"kubernetes-logging\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#kubernetes-logging\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eKubernetes Logging\u003c/h1\u003e\n\u003ch1 id=\"spike-kubernetes-logging\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#spike-kubernetes-logging\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e[SPIKE] Kubernetes Logging\u003c/h1\u003e\n\u003cp\u003eSpike about logging from Kubernetes to other services. Check wich tools, tendencies, compatibility.\u003c/p\u003e\n\u003ch2 id=\"podcast\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#podcast\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003ePodcast\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://open.spotify.com/episode/3DvlI6SBdTn7yAd4UoNc4K?si=puy9i7eUTjiFTBIyqFbk_A\"\u003eFluent Bit: Lightweight Logging for Cloud Native Applications - Eduardo Silva\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://open.spotify.com/episode/6pKuVLowNYLshWA4DjXIw9?si=DUmeWZZ9RwizoIFlvHmszw\"\u003eLogging with Loki\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://open.spotify.com/episode/66pNYv1filMAlVTdRg2qHe?si=EHQvzEJ1QYa0GM6vektMEA\"\u003eBuilding Datadog with Alexis Le Quoc\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://softwareengineeringdaily.com/wp-content/uploads/2018/04/SED575-Building-Datadog.pdf\"\u003eTranscript\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://open.spotify.com/episode/7rVsxtJ3GKS1MQWZQeXc07?si=9w5w5HgVRHqvhe9yhRIzlg\"\u003eMonitoring Kubernetes  With LLan Rabinobitch\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"blogs\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#blogs\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eBlogs\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://medium.com/hashmapinc/application-logging-simplified-in-kubernetes-part-1-5ba603a1744b\"\u003eApplication Logging Simplified in Kubernetes \u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.datadoghq.com/blog/fluentbit-integration-announcement/\"\u003eFluent bit with data dog \u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://echorand.me/posts/fluentbit-kubernetes/\"\u003eFluent bit kubernets \u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"data-collector\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#data-collector\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eData Collector\u003c/h2\u003e\n\u003cp\u003eIs important for getting information and redirected to a service like datadog, elasticsearch etc.\u003c/p\u003e\n\u003cp\u003eSome options:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eFluentd pod: \u003ca href=\"https://hub.docker.com/r/fluent/fluentd/\"\u003ehttps://hub.docker.com/r/fluent/fluentd/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eFluent Bit: \u003ca href=\"https://fluentbit.io/\"\u003ehttps://fluentbit.io/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eLoki: \u003ca href=\"https://github.com/grafana/loki\"\u003ehttps://github.com/grafana/loki\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI tried Fluent bit and it's working great, collecting information from every pod as deamon set. A DeamonSet let's you get information inside every pod, without affecting performance too much.\u003c/p\u003e\n\u003ch3 id=\"fluent-bit\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#fluent-bit\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eFluent Bit\u003c/h3\u003e\n\u003cp\u003eTutorial for kubernetes: \u003ca href=\"https://docs.fluentbit.io/manual/installation/kubernetes\"\u003ehttps://docs.fluentbit.io/manual/installation/kubernetes\u003c/a\u003e\u003c/p\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e$ kubectl create namespace logging\n$ kubectl create -f https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/fluent-bit-service-account.yaml\n$ kubectl create -f https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/fluent-bit-role.yaml\n$ kubectl create -f https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/fluent-bit-role-binding.yaml\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eimportant to consider \u003ccode\u003eMatch\u003c/code\u003e wich is related with the tags that you defined as \u003ccode\u003eInput\u003c/code\u003e \u003c/p\u003e\n\u003cpre class=\"language-yaml\"\u003e\u003ccode class=\"language-yaml\"\u003e$ config_map.yaml\n\n\u003cspan class=\"token key atrule\"\u003eoutput-datadog.conf\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e|\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eOUTPUT\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n  Name        datadog\n  Match       backend\n  apikey      $\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eFLUENT_DATADOG_API_KEY\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  dd_service  backend\n  dd_tags     container\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003ebackend\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e env\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003estaging\n  dd_source         fluent\u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003ebit\n  dd_message_key    log_processed\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDeamonSet generic \u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ kubectl create -f https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/output/elasticsearch/fluent-bit-configmap.yaml\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"logging\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#logging\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eLogging\u003c/h2\u003e\n\u003cp\u003ePrometheus vs Datadog: \u003ca href=\"https://www.bluematador.com/blog/how-to-monitor-your-kubernetes-cluster-prometheus-vs-datadog\"\u003ehttps://www.bluematador.com/blog/how-to-monitor-your-kubernetes-cluster-prometheus-vs-datadog\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eDatadog\u003c/p\u003e\n\u003ch2 id=\"roadblocks\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#roadblocks\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eRoadblocks\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eInput and ouputs references didn't match\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ideas\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ideas\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eIdeas\u003c/h2\u003e\n\u003cp\u003eElasticseach like hammer for a spike\u003c/p\u003e\n\u003cp\u003eLoki focus on logs and it's like prometheus. compared with elasticsearch that focus on any kind of data that you store.\u003c/p\u003e\n\u003ch2 id=\"references\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#references\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eReferences\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=B2IS-XS-cc0\"\u003ehttps://www.youtube.com/watch?v=B2IS-XS-cc0\u003c/a\u003e [Fluent Bit explained | Fluent Bit vs Fluentd][TechWorld with Nana]\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.fluentbit.io/manual/pipeline/outputs/datadog\"\u003ehttps://docs.fluentbit.io/manual/pipeline/outputs/datadog\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.datadoghq.com/blog/fluentbit-integration-announcement/\"\u003ehttps://www.datadoghq.com/blog/fluentbit-integration-announcement/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.datadoghq.com/integrations/fluentbit/\"\u003ehttps://docs.datadoghq.com/integrations/fluentbit/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dev.to/amitsaha/how-to-set-up-log-forwarding-in-a-kubernetes-cluster-using-fluent-bit-3bgk\"\u003ehttps://dev.to/amitsaha/how-to-set-up-log-forwarding-in-a-kubernetes-cluster-using-fluent-bit-3bgk\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/DataDog/trace-examples/blob/98626d924f82666de60d6b2d6a65d87eebebdff1/opentelemetry/k8s-collector.yml#L181\"\u003ehttps://github.com/DataDog/trace-examples/blob/98626d924f82666de60d6b2d6a65d87eebebdff1/opentelemetry/k8s-collector.yml#L181\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"backlinks\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#backlinks\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eBacklinks\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/3c4e65d2-d0ca-4450-8073-dc1a39bddc29\"\u003eDatadog (operating-systems)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e",
            "noteIndex": {
              "id": "23f9dc67-8303-4034-90d3-7371e6cc8996",
              "title": "Welcome",
              "vault": { "fsPath": "vault", "name": "vault" },
              "type": "note",
              "desc": "",
              "links": [
                {
                  "type": "ref",
                  "from": {
                    "fname": "root",
                    "id": "23f9dc67-8303-4034-90d3-7371e6cc8996",
                    "vaultName": "vault"
                  },
                  "value": "architecture.microservices",
                  "position": {
                    "start": { "line": 14, "column": 1, "offset": 460 },
                    "end": { "line": 14, "column": 55, "offset": 514 },
                    "indent": []
                  },
                  "xvault": true,
                  "to": {
                    "fname": "architecture.microservices",
                    "vaultName": "architecture"
                  }
                }
              ],
              "anchors": {
                "personal-wiki": {
                  "type": "header",
                  "text": "Personal wiki",
                  "value": "personal-wiki",
                  "line": 8,
                  "column": 0
                },
                "content-example": {
                  "type": "header",
                  "text": "Content Example",
                  "value": "content-example",
                  "line": 18,
                  "column": 0
                }
              },
              "fname": "root",
              "updated": 1626063584796,
              "created": 1621701645107,
              "parent": null,
              "children": [
                "QYW64J8o1q-RZUAWNuBVz",
                "yWa7opDl6kwVzYa8jBw6Y",
                "9bb7282d-4ab7-4792-b0c5-43f293c296e1",
                "47e06771-c344-4012-8428-07fea574a55e",
                "dc9ce0b8-8551-4aaf-bcc8-309ad1c58b36",
                "4ad54c56-c118-4c77-b7a7-704b6e57579c",
                "8a285efb-1044-43b2-b86f-904ad3bf48fc",
                "3e958243-cf77-44a4-8a90-fef2ec98ad43",
                "28e19609-7af9-4cfe-8ea3-a7341e6709e8",
                "d824c890-9817-49b3-ba11-36bc6c166015",
                "9729bb5d-6c46-4422-bc01-0d4f1a9b3ef8"
              ],
              "data": {},
              "contentHash": "e01bd36ad387507acb1823b37e43ca12",
              "custom": { "nav_order": 0, "permalink": "/" },
              "body": "\n## Personal wiki\n\n\u003e This is my personal wiki page, where I put ideas diagrams, where I'm researching a topic, you may not found elaborated articles, just notes that I took at some point when studying. Some notes may be outdated, not following best practices, wrong information or you would like to contribute, email me! I'll appreciate it!\n\nMy e-mail: mzavaletavargas@gmail.com\n\nThanks!\n\n[Back to mi website](http://gustavozavaleta.com)\n\n### Content Example\n\n![[dendron://architecture/architecture.microservices]]\n"
            },
            "collectionChildren": null,
            "customHeadContent": null,
            "config": {
              "version": 4,
              "useFMTitle": true,
              "useNoteTitleForLink": true,
              "site": {
                "copyAssets": true,
                "siteHierarchies": ["root"],
                "siteRootDir": "docs",
                "usePrettyRefs": true,
                "title": "Gustavo's Wiki",
                "description": "Personal knowledge space",
                "duplicateNoteBehavior": {
                  "action": "useVault",
                  "payload": [
                    "vault",
                    "programming",
                    "dev-ops",
                    "operating-systems",
                    "personal-growth",
                    "databases",
                    "networking",
                    "computer-science",
                    "books",
                    "infrastructure",
                    "health",
                    "architecture"
                  ]
                },
                "siteUrl": "https://wiki.gustavozavaleta.com",
                "siteLastModified": true,
                "gh_edit_branch": "main",
                "usePrettyLinks": true,
                "siteNotesDir": "notes",
                "siteFaviconPath": "favicon.ico",
                "gh_edit_link": true,
                "gh_edit_link_text": "Edit this page on GitHub",
                "gh_root": "docs/",
                "gh_edit_view_mode": "edit",
                "writeStubs": true,
                "siteIndex": "root"
              },
              "dev": { "previewV2Enabled": false, "enablePreviewV2": true },
              "commands": {
                "lookup": {
                  "note": {
                    "selectionMode": "extract",
                    "confirmVaultOnCreate": false,
                    "leaveTrace": false,
                    "bubbleUpCreateNew": true,
                    "fuzzThreshold": 0.2
                  }
                },
                "insertNote": { "initialValue": "templates" },
                "insertNoteLink": {
                  "aliasMode": "none",
                  "enableMultiSelect": false
                },
                "insertNoteIndex": { "enableMarker": false },
                "randomNote": {}
              },
              "workspace": {
                "dendronVersion": "0.72.0",
                "vaults": [
                  { "fsPath": "architecture", "name": "architecture" },
                  { "fsPath": "health", "name": "health" },
                  { "fsPath": "infrastructure", "name": "infrastructure" },
                  { "fsPath": "books", "name": "books" },
                  { "fsPath": "computer-science", "name": "computer-science" },
                  { "fsPath": "networking", "name": "networking" },
                  { "fsPath": "databases", "name": "databases" },
                  { "fsPath": "personal-growth", "name": "personal-growth" },
                  {
                    "fsPath": "operating-systems",
                    "name": "operating-systems"
                  },
                  { "fsPath": "dev-ops", "name": "dev-ops" },
                  { "fsPath": "programming", "name": "programming" },
                  { "fsPath": "vault", "name": "vault" }
                ],
                "journal": {
                  "dailyDomain": "daily",
                  "name": "journal",
                  "dateFormat": "y.MM.dd",
                  "addBehavior": "childOfDomain"
                },
                "scratch": {
                  "name": "scratch",
                  "dateFormat": "y.MM.dd.HHmmss",
                  "addBehavior": "asOwnDomain"
                },
                "graph": { "zoomSpeed": 1 },
                "enableAutoCreateOnDefinition": false,
                "enableXVaultWikiLink": false,
                "enableRemoteVaultInit": true,
                "workspaceVaultSyncMode": "noCommit",
                "enableAutoFoldFrontmatter": false,
                "maxPreviewsCached": 10,
                "maxNoteLength": 204800,
                "task": {
                  "name": "",
                  "dateFormat": "",
                  "addBehavior": "childOfCurrent",
                  "statusSymbols": {
                    "": " ",
                    "wip": "w",
                    "done": "x",
                    "assigned": "a",
                    "moved": "m",
                    "blocked": "b",
                    "delegated": "l",
                    "dropped": "d",
                    "pending": "y"
                  },
                  "prioritySymbols": { "H": "high", "M": "medium", "L": "low" },
                  "todoIntegration": false,
                  "createTaskSelectionType": "selection2link"
                },
                "enableUserTags": true,
                "enableHashTags": true,
                "enableEditorDecorations": true
              },
              "preview": {
                "enableFMTitle": true,
                "enableNoteTitleForLink": true,
                "enableMermaid": true,
                "enablePrettyRefs": true,
                "enableKatex": true
              },
              "mermaid": true,
              "useKatex": true
            }
          },
          "__N_SSG": true
        },
        "page": "/notes/[id]",
        "query": { "id": "bb0aabc9-d22e-4f1d-905d-96853fd3f8f7" },
        "buildId": "L9maZkX7GA1Lh6KYhgL2P",
        "isFallback": false,
        "gsp": true,
        "scriptLoader": []
      }
    </script>
  </body>
</html>
